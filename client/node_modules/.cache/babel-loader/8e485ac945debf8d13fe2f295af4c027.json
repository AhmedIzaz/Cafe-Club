{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useStateValue } from \"./StateContext\";\n\nfunction useMethods() {\n  _s();\n\n  const auth_base_url = \"https://localhost:8000/auth\";\n  const [state, dispatch] = useStateValue();\n  const navigate = useNavigate();\n\n  const login = data => {\n    axios.post(`${auth_base_url}/login`, { ...data\n    }).then(response => {\n      var _response$data, _response$data2;\n\n      console.log(\"here\");\n      const {\n        user,\n        token\n      } = response.data;\n      if (!user && !token) return alert(((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.message) || ((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.error));\n      dispatch({\n        type: \"ADD_USER\",\n        user\n      });\n      dispatch({\n        type: \"ADD_TOKEN\",\n        token\n      });\n      sessionStorage.setItem(\"user\", JSON.stringify(user));\n      sessionStorage.setItem(\"token\", token);\n      return navigate(\"/\");\n    }).catch(error => alert(error));\n  };\n\n  const signup = data => {\n    axios.post(`${auth_base_url}/signup`, { ...data\n    }).then(response => {\n      var _response$data3, _response$data4;\n\n      if (response.data.status !== 200) return alert(((_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.message) || ((_response$data4 = response.data) === null || _response$data4 === void 0 ? void 0 : _response$data4.error));\n      return alert(response.data.message);\n    }).catch(error => alert(error));\n  };\n\n  const logout = () => {\n    dispatch({\n      type: \"REMOVE_USER\"\n    });\n  };\n\n  return {\n    login,\n    signup,\n    logout\n  };\n}\n\n_s(useMethods, \"Y9CzdkAdpfCTXAlzqbhzxeemAUo=\", false, function () {\n  return [useStateValue, useNavigate];\n});\n\nexport default useMethods;","map":{"version":3,"sources":["/home/asif/Desktop/cafe_club/client/src/StateProvider/useMethods.jsx"],"names":["axios","useNavigate","useStateValue","useMethods","auth_base_url","state","dispatch","navigate","login","data","post","then","response","console","log","user","token","alert","message","error","type","sessionStorage","setItem","JSON","stringify","catch","signup","status","logout"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,aAAT,QAA8B,gBAA9B;;AAEA,SAASC,UAAT,GAAsB;AAAA;;AACpB,QAAMC,aAAa,GAAG,6BAAtB;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBJ,aAAa,EAAvC;AACA,QAAMK,QAAQ,GAAGN,WAAW,EAA5B;;AACA,QAAMO,KAAK,GAAIC,IAAD,IAAU;AACtBT,IAAAA,KAAK,CACFU,IADH,CACS,GAAEN,aAAc,QADzB,EACkC,EAAE,GAAGK;AAAL,KADlC,EAEGE,IAFH,CAESC,QAAD,IAAc;AAAA;;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,YAAM;AAAEC,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkBJ,QAAQ,CAACH,IAAjC;AACA,UAAI,CAACM,IAAD,IAAS,CAACC,KAAd,EACE,OAAOC,KAAK,CAAC,mBAAAL,QAAQ,CAACH,IAAT,kEAAeS,OAAf,yBAA0BN,QAAQ,CAACH,IAAnC,oDAA0B,gBAAeU,KAAzC,CAAD,CAAZ;AACFb,MAAAA,QAAQ,CAAC;AAAEc,QAAAA,IAAI,EAAE,UAAR;AAAoBL,QAAAA;AAApB,OAAD,CAAR;AACAT,MAAAA,QAAQ,CAAC;AAAEc,QAAAA,IAAI,EAAE,WAAR;AAAqBJ,QAAAA;AAArB,OAAD,CAAR;AACAK,MAAAA,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA+BC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAA/B;AACAM,MAAAA,cAAc,CAACC,OAAf,CAAuB,OAAvB,EAAgCN,KAAhC;AACA,aAAOT,QAAQ,CAAC,GAAD,CAAf;AACD,KAZH,EAaGkB,KAbH,CAaUN,KAAD,IAAWF,KAAK,CAACE,KAAD,CAbzB;AAcD,GAfD;;AAgBA,QAAMO,MAAM,GAAIjB,IAAD,IAAU;AACvBT,IAAAA,KAAK,CACFU,IADH,CACS,GAAEN,aAAc,SADzB,EACmC,EAAE,GAAGK;AAAL,KADnC,EAEGE,IAFH,CAESC,QAAD,IAAc;AAAA;;AAClB,UAAIA,QAAQ,CAACH,IAAT,CAAckB,MAAd,KAAyB,GAA7B,EACE,OAAOV,KAAK,CAAC,oBAAAL,QAAQ,CAACH,IAAT,oEAAeS,OAAf,yBAA0BN,QAAQ,CAACH,IAAnC,oDAA0B,gBAAeU,KAAzC,CAAD,CAAZ;AACF,aAAOF,KAAK,CAACL,QAAQ,CAACH,IAAT,CAAcS,OAAf,CAAZ;AACD,KANH,EAOGO,KAPH,CAOUN,KAAD,IAAWF,KAAK,CAACE,KAAD,CAPzB;AAQD,GATD;;AAUA,QAAMS,MAAM,GAAG,MAAM;AACnBtB,IAAAA,QAAQ,CAAC;AAAEc,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACD,GAFD;;AAGA,SAAO;AAAEZ,IAAAA,KAAF;AAASkB,IAAAA,MAAT;AAAiBE,IAAAA;AAAjB,GAAP;AACD;;GAlCQzB,U;UAEmBD,a,EACTD,W;;;AAiCnB,eAAeE,UAAf","sourcesContent":["import axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useStateValue } from \"./StateContext\";\n\nfunction useMethods() {\n  const auth_base_url = \"https://localhost:8000/auth\";\n  const [state, dispatch] = useStateValue();\n  const navigate = useNavigate();\n  const login = (data) => {\n    axios\n      .post(`${auth_base_url}/login`, { ...data })\n      .then((response) => {\n        console.log(\"here\");\n        const { user, token } = response.data;\n        if (!user && !token)\n          return alert(response.data?.message || response.data?.error);\n        dispatch({ type: \"ADD_USER\", user });\n        dispatch({ type: \"ADD_TOKEN\", token });\n        sessionStorage.setItem(\"user\", JSON.stringify(user));\n        sessionStorage.setItem(\"token\", token);\n        return navigate(\"/\");\n      })\n      .catch((error) => alert(error));\n  };\n  const signup = (data) => {\n    axios\n      .post(`${auth_base_url}/signup`, { ...data })\n      .then((response) => {\n        if (response.data.status !== 200)\n          return alert(response.data?.message || response.data?.error);\n        return alert(response.data.message);\n      })\n      .catch((error) => alert(error));\n  };\n  const logout = () => {\n    dispatch({ type: \"REMOVE_USER\" });\n  };\n  return { login, signup, logout };\n}\n\nexport default useMethods;\n"]},"metadata":{},"sourceType":"module"}