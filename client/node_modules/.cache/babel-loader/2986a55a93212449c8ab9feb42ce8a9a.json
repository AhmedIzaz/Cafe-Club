{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useStateValue } from \"./StateContext\";\n\nfunction useMethods() {\n  _s();\n\n  const auth_base_url = \"http://localhost:8000/auth\";\n  const cart_base_url = \"http://localhost:8000/cart\";\n  const [state, dispatch] = useStateValue();\n  const navigate = useNavigate(); ////======================================\n  ////======================================\n\n  const login = _ref => {\n    let {\n      email,\n      password\n    } = _ref;\n    axios.post(`${auth_base_url}/login`, {\n      email,\n      password\n    }).then(response => {\n      var _response$data, _response$data2;\n\n      if (!response.data.user || !response.data.token) return alert(((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.message) || ((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.error));\n      const {\n        user,\n        token\n      } = response.data;\n      dispatch({\n        type: \"ADD_USER\",\n        user\n      });\n      dispatch({\n        type: \"ADD_TOKEN\",\n        token\n      });\n      sessionStorage.setItem(\"user\", JSON.stringify(user));\n      sessionStorage.setItem(\"token\", token);\n      return navigate(\"/\");\n    }).catch(error => {\n      return alert(error);\n    });\n  }; ////======================================\n  ////======================================\n\n\n  const signup = data => {\n    axios.post(`${auth_base_url}/signup`, { ...data\n    }).then(response => {\n      var _response$data3, _response$data4;\n\n      if (response.data.status !== 200) return alert(((_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.message) || ((_response$data4 = response.data) === null || _response$data4 === void 0 ? void 0 : _response$data4.error));\n      alert(response.data.message);\n      return navigate(\"/login\");\n    }).catch(error => alert(error));\n  }; ////======================================\n  ////======================================\n\n\n  const logout = () => {\n    dispatch({\n      type: \"REMOVE_USER\"\n    });\n    dispatch({\n      type: \"REMOVE_TOKEN\"\n    });\n    return sessionStorage.clear();\n  }; ////======================================\n  ////======================================\n\n\n  const add_to_cart = food => {\n    if (state.carts.filter(cart => cart._id == food._id).length > 0) return alert(\"Food is already exist in your food cart!\");\n    axios.post(`${cart_base_url}/create-cart`, {\n      food_id: food._id,\n      token: state.token\n    }).then(response => {\n      if (!response.data.added) return alert(\"can't add to cart! please try again letter!\");\n      dispatch({\n        type: \"ADD_TO_CARTS\",\n        food\n      });\n    }).catch(error => alert(error.message));\n  }; ////======================================\n  ////======================================\n\n\n  const change_quantity = (value, cart) => {\n    axios.post(`${cart_base_url}/change-quantity`, {\n      value,\n      cart_id: cart._id,\n      token: state.token\n    }).then(response => {\n      if (response.data.status == 200) {\n        const index = state.carts.indexOf(cart);\n        let carts = state.carts;\n        carts[index] = response.data.updated_cart;\n        return dispatch({\n          type: \"CHANGE_CART_QUANTITY\",\n          carts\n        });\n      }\n\n      return alert(\"Cart quantity doesn't update!Please try again!\");\n    }).catch(error => alert(error.message));\n  }; ////======================================\n  ////======================================\n\n\n  const remove_cart = cart_id => {\n    axios.post(`${cart_base_url}/remove-cart`, {\n      cart_id,\n      token: state.token\n    }).then(response => {\n      var _response$data5;\n\n      if (((_response$data5 = response.data) === null || _response$data5 === void 0 ? void 0 : _response$data5.status) == 200) return dispatch({\n        type: \"REMOVE_FROM_CARTS\",\n        cart_id\n      });\n      return alert(\"Cart  doesn't deleted ! Please try again!\");\n    }).catch(error => alert(error.message));\n  }; ////======================================\n  ////======================================\n\n\n  const delete_user_carts = () => {\n    axios.post(`${cart_base_url}/delete-user-carts`, {\n      token: state.token\n    }).then(response => {\n      var _response$data6;\n\n      if (((_response$data6 = response.data) === null || _response$data6 === void 0 ? void 0 : _response$data6.status) == 200) return navigate(\"/\");\n      return alert(\"Can't delete carts.. Please try again letter!\");\n    }).catch();\n  };\n\n  return {\n    login,\n    signup,\n    logout,\n    add_to_cart,\n    change_quantity,\n    remove_cart,\n    delete_user_carts\n  };\n}\n\n_s(useMethods, \"Y9CzdkAdpfCTXAlzqbhzxeemAUo=\", false, function () {\n  return [useStateValue, useNavigate];\n});\n\nexport default useMethods;","map":{"version":3,"sources":["/home/asif/Desktop/cafe_club/client/src/StateProvider/useMethods.jsx"],"names":["axios","useNavigate","useStateValue","useMethods","auth_base_url","cart_base_url","state","dispatch","navigate","login","email","password","post","then","response","data","user","token","alert","message","error","type","sessionStorage","setItem","JSON","stringify","catch","signup","status","logout","clear","add_to_cart","food","carts","filter","cart","_id","length","food_id","added","change_quantity","value","cart_id","index","indexOf","updated_cart","remove_cart","delete_user_carts"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useStateValue } from \"./StateContext\";\n\nfunction useMethods() {\n  const auth_base_url = \"http://localhost:8000/auth\";\n  const cart_base_url = \"http://localhost:8000/cart\";\n  const [state, dispatch] = useStateValue();\n  const navigate = useNavigate();\n  ////======================================\n  ////======================================\n  const login = ({ email, password }) => {\n    axios\n      .post(`${auth_base_url}/login`, { email, password })\n      .then((response) => {\n        if (!response.data.user || !response.data.token)\n          return alert(response.data?.message || response.data?.error);\n        const { user, token } = response.data;\n        dispatch({ type: \"ADD_USER\", user });\n        dispatch({ type: \"ADD_TOKEN\", token });\n        sessionStorage.setItem(\"user\", JSON.stringify(user));\n        sessionStorage.setItem(\"token\", token);\n        return navigate(\"/\");\n      })\n      .catch((error) => {\n        return alert(error);\n      });\n  };\n  ////======================================\n  ////======================================\n  const signup = (data) => {\n    axios\n      .post(`${auth_base_url}/signup`, { ...data })\n      .then((response) => {\n        if (response.data.status !== 200)\n          return alert(response.data?.message || response.data?.error);\n        alert(response.data.message);\n        return navigate(\"/login\");\n      })\n      .catch((error) => alert(error));\n  };\n  ////======================================\n  ////======================================\n  const logout = () => {\n    dispatch({ type: \"REMOVE_USER\" });\n    dispatch({ type: \"REMOVE_TOKEN\" });\n    return sessionStorage.clear();\n  };\n  ////======================================\n  ////======================================\n  const add_to_cart = (food) => {\n    if (state.carts.filter((cart) => cart._id == food._id).length > 0)\n      return alert(\"Food is already exist in your food cart!\");\n    axios\n      .post(`${cart_base_url}/create-cart`, {\n        food_id: food._id,\n        token: state.token,\n      })\n      .then((response) => {\n        if (!response.data.added)\n          return alert(\"can't add to cart! please try again letter!\");\n        dispatch({ type: \"ADD_TO_CARTS\", food });\n      })\n      .catch((error) => alert(error.message));\n  };\n  ////======================================\n  ////======================================\n  const change_quantity = (value, cart) => {\n    axios\n      .post(`${cart_base_url}/change-quantity`, {\n        value,\n        cart_id: cart._id,\n        token: state.token,\n      })\n      .then((response) => {\n        if (response.data.status == 200) {\n          const index = state.carts.indexOf(cart);\n          let carts = state.carts;\n          carts[index] = response.data.updated_cart;\n          return dispatch({ type: \"CHANGE_CART_QUANTITY\", carts });\n        }\n        return alert(\"Cart quantity doesn't update!Please try again!\");\n      })\n      .catch((error) => alert(error.message));\n  };\n  ////======================================\n  ////======================================\n  const remove_cart = (cart_id) => {\n    axios\n      .post(`${cart_base_url}/remove-cart`, { cart_id, token: state.token })\n      .then((response) => {\n        if (response.data?.status == 200)\n          return dispatch({ type: \"REMOVE_FROM_CARTS\", cart_id });\n        return alert(\"Cart  doesn't deleted ! Please try again!\");\n      })\n      .catch((error) => alert(error.message));\n  };\n  ////======================================\n  ////======================================\n  const delete_user_carts = () => {\n    axios\n      .post(`${cart_base_url}/delete-user-carts`, {\n        token: state.token,\n      })\n      .then((response) => {\n        if (response.data?.status == 200) return navigate(\"/\");\n        return alert(\"Can't delete carts.. Please try again letter!\");\n      })\n      .catch();\n  };\n  return {\n    login,\n    signup,\n    logout,\n    add_to_cart,\n    change_quantity,\n    remove_cart,\n    delete_user_carts,\n  };\n}\n\nexport default useMethods;\n"]},"metadata":{},"sourceType":"module"}